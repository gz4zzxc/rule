# general
mixed-port: 7890
ipv6: false
allow-lan: true
external-controller: 127.0.0.1:9090
profile:
  store-selected: true
  store-fake-ip: true

##### anchor area START #####
x-pg:
  mini-select-region: &x-pp-select-region
    type: select
    proxies:
      - 🔰 节点选择
      - 🎯 全部直连
      - ✈️ 手动选择
      - 📥 高耗流量
      - 🇭🇰 香港优选
      - 🇺🇸 美国优选
      - 🇯🇵 日本优选
      - 🇹🇼 台湾优选
      - 🇸🇬 新加坡优选
      - 🇰🇷 韩国优选

  mini-select-region-direct: &x-pp-select-region-direct
    type: select
    proxies:
      - 🎯 全部直连
      - 🔰 节点选择
      - ✈️ 手动选择
      - 📥 高耗流量
      - 🇭🇰 香港优选
      - 🇺🇸 美国优选
      - 🇯🇵 日本优选
      - 🇹🇼 台湾优选
      - 🇸🇬 新加坡优选
      - 🇰🇷 韩国优选

  mini-select-all-custom: &x-pp-select-all-custom
    type: select
    include-all: true
    exclude-filter: 'ℹ️ .+: \d.+ (?i:KB|MB|GB|TB) \/ \d.+ (?i:KB|MB|GB|TB).*'

  urltest-region: &x-pp-region
    type: url-test
    url: "https://www.gstatic.com/generate_204"
    interval: 300
    lazy: true
    include-all: true
    exclude-filter: "(?i:专用)"

##### anchor area END #####
proxy-groups:
  - name: 🔰 节点选择
    type: select
    proxies:
      - 🇺🇸 美国优选
      - 🎯 全部直连
      - ✈️ 手动选择
      - 🇭🇰 香港优选
      - 🇯🇵 日本优选
      - 🇹🇼 台湾优选
      - 🇸🇬 新加坡优选
      - 🇰🇷 韩国优选

  - name: ✈️ 手动选择
    <<: *x-pp-select-all-custom

  - name: 🍭 Google
    <<: *x-pp-select-region

  - name: Ⓜ️ Microsoft
    <<: *x-pp-select-region

  - name: ☁️ Onedrive
    <<: *x-pp-select-region-direct

  - name: 💻 Developer
    <<: *x-pp-select-region

  - name: ✨ GenAI
    <<: *x-pp-select-region

  - name: 🍎 Apple
    <<: *x-pp-select-region-direct

  - name: 🎮 Games
    <<: *x-pp-select-region-direct

  - name: 🎵 Spotify
    <<: *x-pp-select-region

  - name: 🎥 Emby Providers
    <<: *x-pp-select-all-custom
    filter: "(?i:Emby)"

  - name: 🎥 Youtube
    <<: *x-pp-select-region
  
  - name: 🎥 Apple TV
    <<: *x-pp-select-region

  - name: 🌍 GlobalMedia
    <<: *x-pp-select-region

  - name: 🌍 AsianMedia
    type: select
    proxies:
      - 🎯 全部直连
      - 🔰 节点选择
      - ✈️ 手动选择
      - 📥 高耗流量
      - 🇭🇰 香港优选
      - 🇹🇼 台湾优选
      - 🇸🇬 新加坡优选

  - name: 💬 Telegram
    <<: *x-pp-select-region

  - name: 𝕏 Twitter
    <<: *x-pp-select-region

  - name: 📥 高耗流量
    <<: *x-pp-select-all-custom
    proxies:
      - 🔰 节点选择
      - 🎯 全部直连
      - ✈️ 手动选择

  - name: 📶 Speedtest
    <<: *x-pp-select-all-custom
    proxies:
      - 🎯 全部直连
      - 🔰 节点选择
      - ✈️ 手动选择

  - name: 🈲 Restricted
    <<: *x-pp-select-all-custom

  - name: 🎯 全部直连
    type: select
    hidden: true
    proxies:
      - DIRECT

  - name: 🛑 Block
    type: select
    hidden: true
    proxies:
      - REJECT

  - name: 🐟 漏网之鱼
    <<: *x-pp-select-region

  - name: 🇭🇰 香港优选
    <<: *x-pp-region
    filter: '(?i:🇭🇰|\bHK[G]?\b|Hong.*?Kong|\bHKT\b|\bHKBN\b|\bHGC\b|\bWTT\b|\bCMI\b|[^-]港)'

  - name: 🇺🇸 美国优选
    <<: *x-pp-region
    filter: '(?i:🇺🇸|\bUS[A]?\b|America|United.*?States|美国|[^-]美|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥)'

  - name: 🇯🇵 日本优选
    <<: *x-pp-region
    filter: '(?i:🇯🇵|\bJP[N]?\b|Japan|Tokyo|Osaka|Saitama|日本|东京|大阪|埼玉|[^-尼]日)'

  - name: 🇹🇼 台湾优选
    <<: *x-pp-region
    filter: '(?i:🇹🇼|\bTW[N]?\b|Taiwan|新北|彰化|\bCHT\b|台湾|[^-]台|\bHINET\b)'

  - name: 🇸🇬 新加坡优选
    <<: *x-pp-region
    filter: '(?i:🇸🇬|\bSG[P]?\b|Singapore|新加坡|狮城|[^-]新)'

  - name: 🇰🇷 韩国优选
    <<: *x-pp-region
    filter: '(?i:🇰🇷|\bK[O]?R\b|South.*?Korea|首尔|韩国|韓國)'

##### anchor area START #####
x-rp:
  yaml: &x-rp-yaml
    type: http
    behavior: classical
    format: yaml
    interval: 86400
  text: &x-rp-text
    type: http
    behavior: classical
    format: text
    interval: 86400
  mrs: &x-rp-mrs
    type: http
    format: mrs
    interval: 86400
##### anchor area END #####
rule-providers:
  MyDirect:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/gz4zzxc/rule@main/Clash/list/myCN.list
  MyProxy:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/gz4zzxc/rule@main/Clash/list/foreign.list
  Lan:
    <<: *x-rp-text
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/LocalAreaNetwork.list
  TailscaleDERP_domain:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/jimlee2048/atc-config@main/clash/rules/TailscaleDERP_domain.list
  TailscaleDERP_ip:
    <<: *x-rp-text
    behavior: ipcidr
    url: https://fastly.jsdelivr.net/gh/jimlee2048/atc-config@main/clash/rules/TailscaleDERP_ip.list
  Tailscale_domain:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/jimlee2048/atc-config@main/clash/rules/Tailscale_domain.list
  Tailscale_ip:
    <<: *x-rp-text
    behavior: ipcidr
    url: https://fastly.jsdelivr.net/gh/jimlee2048/atc-config@main/clash/rules/Tailscale_ip.list
  Download:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-download.mrs
  PrivateTracker:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-pt.mrs
  GoogleVoice:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/jimlee2048/atc-config@main/clash/rules/GoogleVoice.list
  OpenAI:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/openai.mrs
  Gemini:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/gemini.mrs
  Anthropic:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/anthropic.mrs
  Grok:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/cc63/Surge@main/Module/Grok.list
  GenAI_Providers:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-ai.mrs
  GenAIOverseas:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-ai-!cn.mrs
  Bing:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/bing.mrs
  Developer:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-dev.mrs
  GitHub:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/github.mrs
  Cursor:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/cursor.mrs
  OneDrive:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/onedrive.mrs
  Microsoft:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/microsoft.mrs
  MicrosoftDirect:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/microsoft@cn.mrs
  Google:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/google.mrs
  Apple:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/apple.mrs
  AppleTV:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/apple-tvplus.mrs
  SteamCN:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-games@cn.mrs
  Game:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-games.mrs
  Spotify:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/spotify.mrs
  Emby:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-emby.mrs
  YouTube:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/youtube.mrs
  GlobalMedia:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-media.mrs
  AsianMedia:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-media@cn.mrs
  Telegram:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/telegram.mrs
  Twitter:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/twitter.mrs
  ProxyHighBandwidth:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/jimlee2048/atc-config@main/clash/rules/ProxyHighBandwidth.list
  Speedtest:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-speedtest.mrs
  RestrictedZones:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/gz4zzxc/rule@main/Clash/list/fallback.list
  Global:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/geolocation-!cn.mrs
  China:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/cn.mrs

rules:
  # 1. custom override
  - RULE-SET,MyDirect,🎯 全部直连
  - RULE-SET,MyProxy,🔰 节点选择

  # 2. direct
  - RULE-SET,Lan,🎯 全部直连
  - RULE-SET,TailscaleDERP_domain,🎯 全部直连
  - RULE-SET,Tailscale_domain,🎯 全部直连
  - RULE-SET,TailscaleDERP_ip,🎯 全部直连,no-resolve
  - RULE-SET,Tailscale_ip,🎯 全部直连,no-resolve
  - RULE-SET,Download,🎯 全部直连
  - RULE-SET,PrivateTracker,🎯 全部直连
  - RULE-SET,MicrosoftDirect,🎯 全部直连

  # 3. proxy
  - RULE-SET,ProxyHighBandwidth,📥 高耗流量
  - RULE-SET,RestrictedZones,🈲 Restricted
  - RULE-SET,Bing,🇺🇸 美国优选
  - RULE-SET,GenAI_Providers,✨ GenAI
  - RULE-SET,GenAIOverseas,✨ GenAI
  - RULE-SET,OpenAI,✨ GenAI
  - RULE-SET,Anthropic,✨ GenAI
  - RULE-SET,Gemini,✨ GenAI
  - RULE-SET,Grok,✨ GenAI
  - RULE-SET,Developer,💻 Developer
  - RULE-SET,GitHub,💻 Developer
  - RULE-SET,Cursor,💻 Developer
  - RULE-SET,OneDrive,☁️ Onedrive
  - RULE-SET,Microsoft,Ⓜ️ Microsoft
  - RULE-SET,YouTube,🎥 Youtube
  - RULE-SET,Google,🍭 Google
  - RULE-SET,Apple,🍎 Apple
  - RULE-SET,AppleTV,🎥 Apple TV
  - RULE-SET,SteamCN,🎯 全部直连
  - RULE-SET,Game,🎮 Games
  - RULE-SET,Spotify,🎵 Spotify
  - RULE-SET,Emby,🎥 Emby Providers
  - RULE-SET,GlobalMedia,🌍 GlobalMedia
  - RULE-SET,AsianMedia,🌍 AsianMedia
  - RULE-SET,Telegram,💬 Telegram
  - RULE-SET,Twitter,𝕏 Twitter
  - RULE-SET,Speedtest,📶 Speedtest
  - RULE-SET,Global,🔰 节点选择
  - RULE-SET,China,🎯 全部直连
  - GEOIP,CN,🎯 全部直连
  - MATCH,🐟 漏网之鱼